<div class="container register-container">
    <h1>Member Registration</h1>
</div>

<div class="form-group1 register-container">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <div class="input-group1" *ngFor="let field of fields">
            <label *ngIf="field.visible">{{ field.label }}<span *ngIf="field.required" style="color: red;">*</span></label>

            <div class="contact-input" *ngIf="field.label === 'Mobile' && field.visible ">
                <div class="contact-field">
                  <div class="country-code" (click)="toggleDropdown()">
                    <img *ngIf="selectedCountryObj?.flag" [src]="selectedCountryObj.flag" class="flag-img" />
                    {{ selectedCountryObj?.code }}
                    <i class="arrow"></i>
                  </div>
              
                  <div class="dropdown-content" *ngIf="showDropdown">
                    <input type="text" class="search-input" placeholder="search country" formControlName="searchCountry" 
                    (ngModelChange)="FilterCountry()"
                    >
                    <div class="dropdown-item" *ngFor="let country of filterCountries" (click)="selectCountry(country)">
                      <img [src]="country.flag" class="flag-img" />
                      {{ country.code }} {{ country.name }}
                    </div>
                  </div>
              
                  <input type="text" id="mobile" class="mobile-input" formControlName={{field.label}}  />
                </div>
              </div>
              
    

            <kendo-textbox
                *ngIf="field.label !== 'Address' && field.visible && field.label !== 'Mobile' "
                id="{{ field.label }}"
                formControlName="{{ field.label }}"
            ></kendo-textbox>

            <kendo-textarea
                *ngIf="field.label === 'Address' && field.visible"
                id="{{ field.label }}"
                formControlName="{{ field.label }}" [rows]="4"  
            ></kendo-textarea>

            <small *ngIf="form.get(field.label)?.touched && form.get(field.label)?.invalid">
                <span *ngIf="form.get(field.label)?.hasError('required')" class="error">
                    {{ field.label }} is required.
                </span>
                <span *ngIf="form.get(field.label)?.hasError('email')" class="error">
                    Please enter a valid email address.
                </span>
                <span *ngIf="form.get(field.label)?.hasError('pattern')" class="error">
                    Enter a valid phone number.
                </span>
            </small>
        </div>
        <div class="button-group1">
            <button id="submit" kendoButton type="submit">Submit</button>
        </div>
    </form>
</div>